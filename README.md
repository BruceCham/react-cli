# Reactå®æˆ˜éª¨æ¶ 
> ğŸ¨  webpack4 + react16 + typescript3 å…¨å®¶æ¡¶å®æˆ˜éª¨æ¶ ğŸŒŸ  
> æŒç»­æ›´æ–°ä¸­ï¼Œä¿æŒä¾èµ–åŒ…ç‰ˆæœ¬æœ€æ–° ğŸ‡¨ğŸ‡³  
> 2018/10/17 å·²æ›´æ–°ï¼  

<div align="center">
  <a href='https://facebook.github.io/react/'>
    <img src='./images/react.png' alt='react Logo Landscape' width='80'/>
  </a>
</div> 
<div align="center">
  <a href='http://redux.js.org'>
    <img src='./images/redux.png' width='250'/>
  </a>
</div> 
<div align="center">
  <a href='https://github.com/redux-saga/redux-saga'>
    <img src='./images/redux-saga.png' alt='Redux Logo Landscape' width='400'/>
  </a>
</div> 

<br>

## <a name="features">&sect; æŠ€æœ¯æ ˆ</a>
> è¯¦æƒ…å¯å‚é˜… `package.json`

* React 16.2.0
* Redux 3.7.2
* React-redux 5.0.6
* React-router-dom 4.2.2 
* Redux-saga 0.16.0
* Webpack 4.16.2
* Babel-ESlint + Pre-ommit
* Axios 0.17.1
* ES6 + Babel
* TypeScript 3.0.3
*** 

<br>

## <a>&sect; åŠŸèƒ½ç‚¹</a>
> å·²å®ç°    

* Reactã€Redux å…¨å®¶æ¡¶
* React-router-dom è·¯ç”±
* Redux-saga å®ç”¨å·¥å…·
* redux-form è¡¨å•å®ä¾‹  
* Hmr çƒ­æ›¿æ¢  
* vendor-trunk æ‹†åˆ†æ‰“åŒ…  
* Axios ç½‘ç»œè¯·æ±‚ï¼ˆå†…æœ‰ fetchï¼Œå¯è‡ªè¡Œåˆ‡æ¢ï¼‰
* Mock æ•°æ®APIæ¥å£
* ESlint `git` æäº¤æ—¶å€™ï¼Œè¯­æ³•è§„åˆ™è‡ªåŠ¨æ ¡éªŒ Â 
* åŠ¨æ€è·¯ç”±  

***

<br>

## <a name="features">&sect; æ›´æ–°å†…å®¹</a>  
- 2018/10/16 ts + react-loadable å®ç°æ‡’åŠ è½½ 
- 2018/10/11 ä¿®å¤ redux-form ts 
- 2018/09/29 å¢åŠ  typescript 3+ 
- 2018/09/28 å‡çº§ webpack 4+ 
- 2017/12/06 å¢åŠ ä»£ç†æ¥å£é…ç½®å®ä¾‹ 
- 2017/11/20 
  - æ”¯æŒææ¡ˆä¸­çš„ `ES7 å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ ...{}` 
- 2017/11/17 
  - å¢åŠ ç¯å¢ƒå˜é‡ `__ENV__`ï¼Œæ–¹ä¾¿é…ç½®ç¯å¢ƒå‚æ•°ã€‚ç”¨æ³•`npm run build:qa` 
- 2017/11/15 
  - ä¿®å¤ `provider` ä¸æ”¯æŒ `çƒ­æ›¿æ¢` çš„é—®é¢˜  
- 2017/11/10 
  - å¯¹ä¾èµ–æ¨¡å—æ‹†åˆ†æ‰“åŒ…ï¼Œè§£å†³å•ä¸ª `trunk` æ–‡ä»¶è¿‡å¤§é—®é¢˜  
- 2017/11/07 
  - å¢åŠ  `css module` åŠŸèƒ½  
- 2017/11/06 
  - å¢åŠ  `dev-server` ä¸‹çƒ­æ›¿æ¢åŠŸèƒ½â€”â€”ã€Hmrã€  
- 2017/08/21 
  - å»æ‰ `babel-presets-stag-2`ï¼Œç»Ÿä¸€ä¸º `babel-presets-env`  
- 2017/07/13 
  - ~~å¢åŠ åŠ¨æ€è·¯ç”±åŠŸèƒ½ï¼Œç”¨æ³•è§ `SimpleFormContainer`~~  
- 2017/07/06 
  - å¢åŠ  `antd` æŒ‰éœ€åŠ è½½æ‰“åŒ…é…ç½®(.babelrc)  
- 2017/06/30 
  - ~~ä¿®å¤ `git commit` æäº¤æ—¶å€™ï¼Œæ ¡éªŒ `es7 decorator` ä¸é€šè¿‡é—®é¢˜~~  
- 2017/06/29 
  - å¢åŠ  `redux-form` è¡¨å•éªŒè¯ç»„ä»¶  
- 2017/06/22 
  - å‡çº§ `webpack 3.0`ï¼Œå¢åŠ  `scope hoisting`  
- 2017/06/08 
  - ~~å¼•ç”¨ `pure-render-decorator`ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ï¼›å¢åŠ è£…é¥°å™¨ decorator~~  
- 2017/05/22 
  - å¯¹æå–çš„ `server` è¿›è¡Œå°çš„ä¼˜åŒ–  
- 2017/05/16 
  - å¢åŠ  `mock` æ•°æ®ï¼Œå¼•ç”¨ `axios` æ¨¡å—ï¼Œå¹¶æå– `server` è¯·æ±‚  
- 2017/05/15 
  - æ›´æ–° `redux-saga` æœ€æ–°ç‰ˆæœ¬ç”¨æ³• æ›´æ–° `react-router4` æœ€æ–°ç‰ˆç”¨æ³•  
  
***

<br>

## <a name="features">&sect; ç¯å¢ƒé…ç½®</a>
* runtime: Node å¼€å‘ç¯å¢ƒ
* å¼€å‘å·¥å…·: VSCode

<br>

## <a name="reference">&sect; å‚è€ƒèµ„æ–™</a>
* [redux-sagaä¸­æ–‡ç«™ç‚¹](http://leonshi.com/redux-saga-in-chinese/docs/introduction/BeginnerTutorial.html)
* [react-redux](https://github.com/vue-china/react-redux-starter-kit)
* [TypeScript](https://www.tslang.cn/docs/handbook/basic-types.html)
* [Webpack 4](https://webpack.js.org/concepts/)
<br>

## <a name="architecture">&sect; é¡¹ç›®æ¶æ„</a>
### <a name="tree">âŠ™ ç›®å½•ç»“æ„</a>
```
.
â”œâ”€ build/ Â  Â  Â  Â  Â      # åŸºäºVue-cliå®ç°çš„Webpackæ„å»ºç›®å½•
â”œâ”€ dist/ Â  Â  Â  Â  Â  Â     # build ç”Ÿæˆçš„ç”Ÿäº§ç¯å¢ƒä¸‹çš„é¡¹ç›®
â”œâ”€ src/                 # æºç ç›®å½•
â”‚   â”œâ”€ assets/          # images
â”‚   â”œâ”€ components/      # ç»„ä»¶ï¼ˆCOMPONENTï¼‰
â”‚ Â  â”œâ”€ const/ Â  Â  Â  Â    # å¸¸é‡é›†ä¸­ç®¡ç†
â”‚ Â  â”œâ”€ containers/ Â  Â   # å®¹å™¨
â”‚ Â  â”œâ”€ reducers/ Â  Â  Â   # å‡½æ•°å› å­
â”‚ Â  â”œâ”€ routers/ Â  Â  Â    # è·¯ç”±
â”‚ Â  â”œâ”€ saga/ Â  Â  Â  Â  Â   # è·¯ç”±è§†å›¾åŸºé¡µï¼ˆVIEWï¼‰
â”‚ Â  â”œâ”€ server/ Â  Â  Â  Â   # ç½‘ç»œè¯·æ±‚æå–
â”‚ Â  â”œâ”€ utils/ Â  Â  Â  Â  Â  # å…¬ç”¨æ–¹æ³•å°è£…æå–
â”‚ Â  â”œâ”€ index.js Â  Â  Â  Â  # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ index.html Â  Â  Â     # é™æ€æ¨¡æ¿é¡µé¢ï¼Œå¼€å‘å’Œbuildäº§å‡ºï¼Œéƒ½ä¾èµ–å®ƒ
â”œâ”€â”€ .babelrc Â  Â  Â  Â     # Babel è½¬ç é…ç½®
â”œâ”€â”€ .eslintignore       # ESLint æ£€æŸ¥ä¸­éœ€å¿½ç•¥çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰
â”œâ”€â”€ .eslintrc           # ESLint é…ç½®
â”œâ”€â”€ .gitignore Â  Â  Â  Â   # gitå¿½ç•¥æäº¤
â”œâ”€â”€ .postcssrc.js Â  Â  Â  # postcssé…ç½®é¡¹ï¼Œvue-cliäº§å‡º
â”œâ”€â”€ package.json Â  Â     # å¾ˆé‡è¦çš„ä¸œè¥¿äº†
```

<br>

## <a name="reference">&sect; æ“ä½œ</a>
é¡¹ç›®ä¸‹è½½
```
git clone https://github.com/brucecham/react-cli.git
cd react-cli
git checkout release/webpack4
npm i
```
å¯åŠ¨å¼€å‘ç¯å¢ƒ
```
npm run start
```
æ„å»ºç”Ÿäº§ç¯å¢ƒä»£ç 
```
npm run build
```

<br>

## <a name="reference">&sect; packageç‰ˆæœ¬æ›´æ–°</a>
> å¯ä½¿ç”¨ [ncu](https://www.npmjs.com/package/npm-check-updates)
```
ncu -a
```

<br>

## <a name="reference">&sect; å¯åŠ¨é™æ€æœåŠ¡å™¨</a>
> [http-serverå¯åŠ¨é™æ€æœåŠ¡å™¨](https://www.npmjs.com/package/http-server)
```
npm run build
npm run preview
```

<br>

## <a name="features">&sect; ä¹¦å†™å»ºè®®/æ€§èƒ½ä¼˜åŒ–</a> 

### å°½é‡å‡å°‘ dom å±‚çº§ 
Icon æˆ–empty ç­‰çŠ¶æ€æ˜¾ç¤ºï¼Œå¯ä»¥æ”¾åœ¨ before æˆ– after ä¸Šï¼Œ500ä¸ªã€2å±‚DIVã€ä¸500ä¸ªã€1å±‚DIVã€ä½œå¯¹æ¯”ï¼Œåœ¨å®‰å“å¾ˆçƒ‚çš„æµè§ˆå™¨ä¸Šï¼Œä¼šç›¸å·®å‡ ç™¾æ¯«ç§’ã€‚ 

```html
<!-- åŠ£ -->
<div class="video-card">
    <div class="video-empty"></div>
<div>

<!-- ä¼˜ -->
<div class="video-card video-empty">
<div>
``` 

### shouldUpdateï¼Œåªæœ‰ç»„ä»¶æ›´æ–°æ—¶æ‰ä¼šé‡æ–°æ¸²æŸ“ 
1. å¼•å…¥ `pure-render-decorator` ï¼Œä¼˜åŒ–æ¸²æŸ“åˆ¤æ–­(shouleComoonentUpdate)

```js
import pureRender from "pure-render-decorator"
class CountTimer extends Component {
  ...
}
export default pureRender(CountTimer)
```

2. decoratorè£…é¥°å™¨è¯­æ³• **æ¨èç”¨æ³•** 

```js
import pureRender from "pure-render-decorator"
@pureRender
class CountTimer extends Component {
  ...
}
export default CountTimer
```
<div align="center">
 Â <img src='images/purcompare.png' alt='æ€§èƒ½ä¼˜åŒ–åæ¸²æŸ“å¯¹æ¯”' width='500'/>
</div> 

### ä¼ å‚åŠèµ‹å€¼ï¼Œå‡å°‘è§£æ„ 

```html
<!-- åŠ£ -->
<div {...videoData}></div>

<!-- ä¼˜ -->
<div data={videoData}></div>
```

### å¾ªç¯è¯­å¥ 

1. çº¯å¾ªç¯ï¼Œç”¨forEachï¼Œä¸è¦ç”¨mapï¼Œmapä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ€§èƒ½å¹¶ä¸å¿« 
2. åŒå±‚å¾ªç¯ï¼Œæ¶‰åŠåˆ°æŸ¥æ‰¾çš„ï¼Œä¸è¦ç”¨äºŒç»´æ•°ç»„ï¼Œå¯ä»¥ç”¨å¯¹è±¡æ¥å¿«é€Ÿå®šä½ï¼Œå¹¶ç”¨Object.keys()å–åˆ°keyè¿›è¡Œå¾ªç¯ 
3. try {} catch (e) {} é€€å‡ºforEachå¾ªç¯ 

```js
try {
 this.contentTmpList.forEach((item, index) => {
    if (index > 1) {
        throw new Error('')
    }
 })
} catch (e) {}
```


